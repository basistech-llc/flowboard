import{r as g,P as a,y as e,z as Y,B as Q,A as X,C as Z,D as y,N as ee,L as b,E as te,n as re}from"./vendor-Bsx9xHKb.js";import{T as L,B as U,I as se,A as ne,S as oe,F as ie,a as $,D as ae,b as P,c as le,L as S,d as z,M as ce}from"./antd-DeRvLplv.js";import"./index-Bi1hmZVg.js";import"./rc-CcILbRSV.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const m of n.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&l(m)}).observe(document,{childList:!0,subtree:!0});function i(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(s){if(s.ep)return;s.ep=!0;const n=i(s);fetch(s.href,n)}})();function De(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}const de=async(t,r,i)=>{const l=[];let s=null;do{const n=new URL(`https://api.airtable.com/v0/${r}/${i}`);s&&n.searchParams.append("offset",s);const m=await fetch(n.toString(),{headers:{Authorization:`Bearer ${t}`}});if(!m.ok)throw new Error("Failed to fetch data from Airtable");const x=await m.json();l.push(...x.records),s=x.offset}while(s);return l},ue=t=>{const i=t.split("").reverse().map(l=>String.fromCharCode(l.charCodeAt(0)^42)).join("");return btoa(i)},pe=t=>atob(t).split("").map(l=>String.fromCharCode(l.charCodeAt(0)^42)).reverse().join(""),H=g.createContext(),k=()=>g.useContext(H),M=({children:t})=>{const r="appuwUqhc3geVVy1v",[i,l]=g.useState(""),[s,n]=g.useState({}),[m,x]=g.useState(!0),p={};g.useEffect(()=>{const c=localStorage.getItem("airtableToken");c&&l(pe(c)),x(!1)},[]);const h=c=>{const o=ue(c);l(c),localStorage.setItem("airtableToken",o)},T=async({tableName:c,setError:o,cachedOk:f=!0})=>{if(f&&s[c])return s[c];if(p[c])return p[c];if(i)try{return console.log("Fetching",c),p[c]=de(i,r,c).then(d=>(n(j=>({...j,[c]:d})),delete p[c],d)).catch(d=>{throw o(d.message),delete p[c],d}),p[c]}catch(d){o(d.message)}else o("Missing Airtable access token")};return e.jsx(H.Provider,{value:{airtableToken:i,updateAirtableToken:h,baseId:r,initializing:m,getTable:T},children:t})};M.propTypes={children:a.node.isRequired};const R=({text:t})=>Array.isArray(t)?e.jsx("span",{children:t.join(", ")}):e.jsx("span",{children:t});R.propTypes={text:a.oneOfType([a.string,a.arrayOf(a.string)]).isRequired};const D=({id:t,tableName:r})=>{const{getTable:i}=k(),[l,s]=g.useState(null),[n,m]=g.useState([]);if(g.useEffect(()=>{(async()=>{const h=await i({tableName:r,setError:s});m(h)})()},[i,r]),!n.length)return"";const x=({id:p})=>{const h=n.find(T=>T.id===p);return e.jsx(L,{color:"orange",children:(h==null?void 0:h.fields.Name)||(h==null?void 0:h.fields["Record Key"])||(h==null?void 0:h.fields.Company)||p})};return Array.isArray(t)?t.map(p=>e.jsx(x,{id:p},p)):e.jsx(x,{id:t})};D.propTypes={id:a.oneOfType([a.string,a.arrayOf(a.string)]).isRequired,tableName:a.string.isRequired};const N=({option:t})=>e.jsx(L,{color:"blue",children:t});N.propTypes={option:a.string.isRequired};const K=({options:t})=>e.jsx(e.Fragment,{children:t.map((r,i)=>e.jsx(L,{children:r},i))});K.propTypes={options:a.arrayOf(a.string).isRequired};const he=t=>e.jsx("span",{children:t?"Yes":"No"}),V=({url:t,label:r})=>e.jsx(U,{children:e.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:r})});V.propTypes={url:a.string.isRequired,label:a.string.isRequired};const _=({email:t})=>e.jsx("a",{href:`mailto:${t}`,children:t});_.propTypes={email:a.string.isRequired};const G=({url:t})=>e.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:t});G.propTypes={url:a.string.isRequired};const J=({date:t})=>{const r=new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return e.jsx("span",{children:r})};J.propTypes={date:a.string.isRequired};const W=({attachments:t})=>{const r=t==null?void 0:t[0];return e.jsx(se,{src:r.url,alt:r.filename,width:"160px"})};W.propTypes={attachments:a.arrayOf(a.shape({url:a.string.isRequired,filename:a.string.isRequired})).isRequired};const fe=({type:t,value:r})=>{if(Array.isArray(t))return t[0]=="record"?e.jsx(D,{tableName:t[1],id:r}):"";switch(t){case"ignore":return"";case"URL":return e.jsx(G,{url:r});case"email":return e.jsx(_,{email:r});case"button":return e.jsx(V,{url:r==null?void 0:r.url,label:r==null?void 0:r.label});case"date":return e.jsx(J,{date:r});case"image":return e.jsx(W,{attachments:r});case"text":return e.jsx(R,{text:r});case"multilineText":return e.jsx(R,{text:r});case"singleSelect":return e.jsx(N,{option:r});case"multipleSelect":return e.jsx(K,{options:r});case"checkbox":return e.jsx(he,{checked:r});default:return console.error("Can't handle type {type} for",r),e.jsxs("span",{children:[JSON.stringify(r)," "]})}},{Title:ge}=$,v={People:{"First Name":"text","Last Name":"text",Email:"email",Companies:["record","Companies"],Role:"text",Tags:"multipleSelect",LinkedIn:"URL",Crunchbase:"URL"},Companies:{Company:"text","Update Record":"button","Primary Contact":["record","People"],"Home Page":"URL",Tagline:"text",Crunchbase:"URL","Organization Type":"singleSelect",Headquarters:"text",Investor:"checkbox",Interests:"multipleSelect","BT Invest Status":"singleSelect","Portfolio Logo Permission":"checkbox","Logo URL":"URL",Logo:"image","Listed on BasisTech Website":"checkbox",Accelerator:"ignore","(legacy) Funnel":"ignore","To Company (for Fillout)":"ignore","Legacy Notes":"multilineText","Company notes":["record","Company notes"]},Events:{Name:"text",Date:"date",Description:"multilineText",Status:"singleSelect",Speakers:["record","People"]}},E=({tableName:t})=>{const{getTable:r}=k(),[i,l]=g.useState(null),[s,n]=g.useState(null),[m,x]=g.useState({pagination:{current:1,pageSize:20}}),p=(o,f,d)=>{x({pagination:o,filters:f,...d})};if(g.useEffect(()=>{(async()=>{l(await r({tableName:t,setError:n}))})()},[r,t]),s)return e.jsx(ne,{message:"Error",description:s,type:"error",showIcon:!0});if(!i)return e.jsx(oe,{});const h=(o,f)=>{switch(Array.isArray(o)?o[0]:o){case"text":case"multilineText":case"URL":case"singleSelect":return(d,j)=>{const A=d.fields[f]||"",C=j.fields[f]||"";return A.localeCompare(C)};case"record":return(d,j)=>{var O,q;const A=((O=d.fields[f])==null?void 0:O[0])||"",C=((q=j.fields[f])==null?void 0:q[0])||"";return A.localeCompare(C)};case"checkbox":return(d,j)=>{const A=d.fields[f]?1:0,C=j.fields[f]?1:0;return A-C};case"button":case"image":default:return null}},T=Object.keys(v[t]).filter(o=>v[t][o]!=="ignore").map(o=>{const f=v[t][o];return{title:o,dataIndex:["fields",o],key:o,sorter:h(f,o),render:d=>d?e.jsx(fe,{type:f,value:d}):()=>""}}),c=[{title:"ID",dataIndex:"id",key:"id",sorter:(o,f)=>o.id.localeCompare(f.id),render:o=>e.jsx(D,{tableName:t,id:o})},...T];return e.jsxs("div",{children:[e.jsx(ge,{level:1,children:t}),e.jsx(ie,{dataSource:i,columns:c,rowKey:"id",pagination:m.pagination,onChange:p})]})},me=()=>e.jsx(E,{tableName:"People"}),xe=()=>e.jsx(E,{tableName:"Companies"}),je=()=>e.jsx(E,{tableName:"Events"}),ye=()=>e.jsxs("div",{children:[e.jsx("h1",{children:"Funnel"}),e.jsx("p",{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur at lacus nec felis feugiat cursus. Nulla facilisi. Integer at magna a orci tincidunt fermentum sit amet ac nulla."})]}),F="flowboard",u=t=>t?`/${F}/${t}`:`/${F}`,{Title:w}=$,B="config",I="companies",be=()=>{const{airtableToken:t,updateAirtableToken:r}=k(),[i,l]=g.useState(""),s=Y();g.useEffect(()=>{l(t||"")},[t]);const n=()=>{r(i),s(u(I))};return e.jsxs("div",{children:[e.jsx(w,{level:1,children:"Config"}),e.jsx(w,{level:3,children:"To obtain your Airtable API token, follow these steps:"}),e.jsx(Te,{}),e.jsx(ae,{}),e.jsx(w,{level:3,children:"Enter token now:"}),e.jsxs(P,{layout:"vertical",initialValues:{token:t},onFinish:n,children:[e.jsx(P.Item,{label:"Airtable Token",name:"token",rules:[{required:!0,message:"Please input your Airtable token!"}],children:e.jsx(le,{value:i,onChange:m=>l(m.target.value),style:{width:"700px"}})}),e.jsx(P.Item,{children:e.jsx(U,{type:"primary",htmlType:"submit",children:"Save Token"})})]})]})},Te=()=>e.jsx("div",{children:e.jsx(S,{dataSource:[{title:"Log in to Airtable:",steps:["Go to Airtable and log in with your credentials."]},{title:"Navigate to the Developer Hub:",steps:["Click on your profile picture or initials in the top-right corner of the Airtable interface.","Select “Developer hub” from the dropdown menu."]},{title:"Generate a Personal Access Token:",steps:["In the Developer Hub, find the section for Personal Access Tokens.","Click on “Generate token” or a similar button.","Follow the prompts to create a new Personal Access Token, specifying the scopes and bases you want to grant access to.","Copy the generated token. This is your Personal Access Token."]},{title:"Save your token here:",steps:["Paste the token below.","Click “Save Token”.","Note that this will only save the token locally in your browser."]}],renderItem:t=>e.jsx(S.Item,{children:e.jsx(S.Item.Meta,{title:t.title,description:e.jsx(S,{dataSource:t.steps,renderItem:r=>e.jsx(S.Item,{children:r})})})})})}),Ae=()=>e.jsxs("div",{children:[e.jsx("h1",{children:"Help"}),e.jsx("p",{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur at lacus nec felis feugiat cursus. Nulla facilisi. Integer at magna a orci tincidunt fermentum sit amet ac nulla."})]}),{Header:Ce,Content:Se}=z,ke=[{key:"views",label:"Views",children:[{key:"people",label:e.jsx(b,{to:u("people"),children:"People"})},{key:"companies",label:e.jsx(b,{to:u("companies"),children:"Companies"})},{key:"events",label:e.jsx(b,{to:u("events"),children:"Events"})}]},{key:"funnel",label:e.jsx(b,{to:u("funnel"),children:"Funnel"})},{key:"config",label:e.jsx(b,{to:u("config"),children:"Config"})},{key:"help",label:e.jsx(b,{to:u("help"),children:"Help"})}],Pe=()=>{const{airtableToken:t,initializing:r}=k(),i=X();if(r)return null;const l=u("").replace(/\/$/,""),n=i.pathname.replace(l,"").split("/")[1]||(t?I:B);return e.jsxs(z,{style:{height:"100vh"},children:[e.jsxs(Ce,{className:"header",children:[e.jsx("div",{className:"logo",children:e.jsx("img",{src:u("BasisTech.png"),alt:"BasisTech Logo",style:{height:"31px",margin:"16px 24px 16px 0"}})}),e.jsx(ce,{mode:"horizontal",selectedKeys:[n],items:ke})]}),e.jsx(Se,{style:{marginTop:64,padding:"0 24px",background:"#fff"},children:e.jsxs(Z,{children:[e.jsx(y,{path:u(""),element:e.jsx(ee,{to:u(t?I:B)})}),e.jsx(y,{path:u("people"),element:e.jsx(me,{})}),e.jsx(y,{path:u("companies"),element:e.jsx(xe,{})}),e.jsx(y,{path:u("events"),element:e.jsx(je,{})}),e.jsx(y,{path:u("funnel"),element:e.jsx(ye,{})}),e.jsx(y,{path:u("config"),element:e.jsx(be,{})}),e.jsx(y,{path:u("help"),element:e.jsx(Ae,{})})]})})]})},ve=()=>e.jsx(M,{children:e.jsx(Q,{children:e.jsx(Pe,{})})});te.createRoot(document.getElementById("root")).render(e.jsx(re.StrictMode,{children:e.jsx(ve,{})}));export{De as g};
